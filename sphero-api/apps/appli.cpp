/*************************************************************************
	Appli  -  Sphero control applicaiton -- main
							 -------------------
	started                : 08/05/2015
*************************************************************************/

#include <iostream>
#include <string>

#include <readline/readline.h>
#include <readline/history.h>

#include "CommandHandler.h"

using namespace std;

int main(void)
{
	cout << "\033]0;Sphero-cmd\007";
	cout.flush();

	char *buf;
	rl_bind_key('\t',rl_abort);//disable auto-complete

	string command("");
	showHelp();

	while((buf = readline("\nSphero >> ")) != NULL)
	{
		if (strcmp(buf,"quit")==0)
			break;

		if (buf[0]!=0)
			add_history(buf);

		command = string(buf);
		if(handleCommand(command) == 0)
			return 0;
	}


	return 0;
}

/**
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@#i~^^^^^^^_e&@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@$~^^^^^^^^^^^^^^^;&@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@e^^^^.~--_____--~.^^^.#@@@@@@@@@@@@@
@@@@@@@@@@@@$^^^.--__:;;;=;+;:__-~.^^~@@@@@@@@@@@@
@@@@@@@@@@@_^^.--_+;+;;+;i;i;+;;;__~.^^!@@@@@@@@@@
@@@@@@@@@@^^^--_=;+;;+oe!!!!oi;+;;=__~^^_@@@@@@@@@
@@@@@@@@&^^.-_+;+;i?!e******ee!!=+;;+_-.^~@@@@@@@@
@@@@@@@&^^~-_;+;o!e*i-```````-o*e?=+;;_-.^.@@@@@@@
@@@@@@@^^~-:=;+?e*-`````````````:*e!;+;:-.^-@@@@@@
@@@@@@.^.-;;;*!*_````^^^`^^^^^``^^+*!=;;:-.^=@@@@@
@@@@@;^.-:;i*e*^^^^^^^^^^^^^^^^^^^^.*!i+;:-^^#@@@@
@@@@#^^-_i;oeo^^^^^^^^^^^^^^^^^^^^^^^*e=;i_~^^@@@@
@@@@^^~-;;oe*`              `^^^^^^^^^*!=;;_.^o@@@
@@@%^^-;;;!*^^iiiiiiiiiiiiiii: `^^^^^^^*?;i:-^^@@@
@@@.^~-;i!*~^^^-iiiiiiiiiiiiiii= ^^^^^^:e*;;_.^*@@
@@&^^-;;+ei^^^^^^iiiiiii;_:+iiiii^^^^^^^*!;i:-^^@@
@@+^~-;i!*^^^^^^^iiii;^^^^^^^^iiii.^^^^^~e*;;_.^&@
@@^^-_;;!o^^^^^^;iii^^^^^^^^^^^_iii`^^^^^*!+i_~^=@
@@^^-;i*e~^^^^^`iii^^^^^^^^^^^^^-iii^^^^^;e+;:-^^@
@%^.-;;!*^^^^^^iii.^^^^^^^^^^^^^^;ii-^^^^^**;+_^^@
@=^~-ii!*^^^^^^ii+^^^^^^  ^^^^^^^^iii^^^^^*?;;_.^@
@-^~_;;!i^^^^^:ii^^^^^^.ii-^^^^ ^^;ii^^^^^*!;;_.^$
@.^-_++e;^^^^^iii^^^^^^iiii^^^ii.^.ii-^^^^o!+;_.^!
@^^-_;+e:^^^^^iii^^^^^-iiii:^-iii^^ii;^^^^=!;;_.^*
@^^-_;+e:.....ii+.....:iiii+.;iii..ii+....i!=i_.^*
@^^-_;;e+.....ii=....._iiii;.:iii..ii+....o!;;_.^e
@~^~_;;!i.....iii......iiii~..ii+.^ii:....*!ii_.^%
@+^~-=+!*.....=ii^.....+ii=....~..-ii.....*?;;_.^&
@!^.-;;!*.....-ii-......~-........iii.....*e=;_^^@
@@^^-+ioe_.....iii^...............ii+....=e+;:-^^@
@@^^-_;;!*....._ii=^............ iii.....*!=;_.^:@
@@-^.-+i!*~.....iii+^.......... iii_....:e*;+_.^$@
@@O^^-:;+e*......iiii ^......`-iii+.....*!=;:-^^@@
@@@^^~_+iee:......iiiii-   `:iiii+.....=eo;=_.^;@@
@@@*^^-:;;!*~......+iiiiiiiiiiii_....._*?i;:-^^@@@
@@@@^^~-;i+!*.......~=iiiiiiii:......~*!+;=_.^_@@@
@@@@!^^-_;;*e*~........~_:_-........-*!=i;_~^^@@@@
@@@@@.^^-:o;oe*_...................;*!i;;:-^^e@@@@
@@@@@@^^.-:;i=!*o~~~..~...~..~...~oe!+;+:-.^~@@@@@
@@@@@@$^^._:;;i?e*i~~~~~~~~~~~~-o*e!++;:-.^^@@@@@@
@@@@@@@!^^.-_+;;*?e**i:~~~~-:i**e?++;=_-.^^@@@@@@@
@@@@@@@@e^^.-_;+;;o!!ee*****ee!e++;i;_~.^^&@@@@@@@
@@@@@@@@@?^^^~__;;;;i+**!!e*i+;+;i;_-.^^^@@@@@@@@@
@@@@@@@@@@&^^^.-__;;+;i;i;+;;+;i:__~.^^-@@@@@@@@@@
@@@@@@@@@@@@;^^^.~-__:;;=;;;::__-~.^^^?@@@@@@@@@@@
@@@@@@@@@@@@@&~^^^^.~---___--~..^^^^=@@@@@@@@@@@@@
@@@@@@@@@@@@@@@&:^^^^^^^^^^^^^^^^^*@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@O+^^^^^^^^^^~o@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@&#&@@@@@@@@@@@@@@@@@@@@@@@
 *
 */
